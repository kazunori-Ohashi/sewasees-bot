# spec/ ドキュメント利用ガイド

---

## 目的
- 本ディレクトリは「フリー版 Discord Bot（ファイル/音声/動画→Markdown ジェネレータ）」のTDD開発を円滑に進めるための仕様書・テスト仕様書を集約します。

## 構成
- `要求仕様書.md` : 機能・非機能要件、ユースケース、アーキテクチャ、開発WBSを網羅
- `テスト仕様書.md` : ユニット・統合・システム・セキュリティテストの観点でTDD用テストケースを体系化

## TDD開発フローとの関係
1. 仕様書をもとにテストケース（赤）を先に実装
2. 各WBSタスクごとに機能実装→テスト緑化
3. 仕様・テストの両面から品質を担保しつつ、段階的に拡張可能なコードベースを構築

---

## tests/ ディレクトリ構成と役割
- `tests/unit/` : 個々の関数・モジュール単位のロジック検証（例: limit_user, extract_audio, build_prompt など）
- `tests/integration/` : DiscordコマンドやS3連携など、複数モジュールをまたぐ一連のフロー検証
- `tests/system/` : k6等による高負荷・并列リクエスト時の全体応答率・パフォーマンステスト
- `tests/security/` : MIME/拡張子検証や権限昇格防止など、セキュリティ要件の自動テスト
- `conftest.py` : fakeredis, moto, httpx などの共通フィクスチャ定義

--- 